<h1>Your Nearest Recall Signature Collection Locations Are:</h1>

<div id="map-canvas" style="width: 100%; height: 350px;"></div>

<% @signature_collection_locations.each do |signature_collection_location| %>
    <p>
      <%= signature_collection_location.name %>
      <%= signature_collection_location.address1 %>
      <%= signature_collection_location.address2 %>
      <%= signature_collection_location.city %>
      <%= signature_collection_location.state %>
      <%= signature_collection_location.zip %>
      <%= signature_collection_location.notes %>
    </p>
<% end %>

<%= content_for :js_footer do %>
      $(function() {
          var centerLatLng = new google.maps.LatLng(<%= @location_search.coordinates[0] %>, <%= @location_search.coordinates[1] %>);
          var mapOptions = {
              center: centerLatLng,
              zoom: 8,
              mapTypeId: google.maps.MapTypeId.ROADMAP
          };
          var map = new google.maps.Map(document.getElementById("map-canvas"), mapOptions);
          var center_marker = new google.maps.Marker({
            position: centerLatLng,
            map: map,
            title: 'Your search location'
          });
          <%- @signature_collection_locations.each_with_index do |signature_collection_location, i| -%>
            var latLng_<%= i %> = new google.maps.LatLng(<%= signature_collection_location.latitude %>, <%= signature_collection_location.longitude %>);
            var marker_<%= i %> = new google.maps.Marker({
              position: latLng_<%= i %>,
              map: map,
              title: '<%= signature_collection_location.name %>'
            });
          <%- end -%>
      });
<%- end -%>